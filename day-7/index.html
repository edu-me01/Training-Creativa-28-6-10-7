<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Page title for the browser tab -->
  <title>Day 7 - Modern JavaScript Examples</title>
  
  <!-- CSS Styles for the entire page -->
  <style>
    /* Basic page styling */
    body {
        font-family: Arial, sans-serif; /* Clean, readable font */
        padding: 20px; /* Space around the content */
        line-height: 1.6; /* Better readability */
    }

    /* Section headings styling */
    h2 {
        color: #2c3e50; /* Dark blue color for headings */
    }

    /* Code block styling */
    pre {
        background: #f4f4f4; /* Light gray background */
        padding: 10px; /* Internal spacing */
        border-radius: 5px; /* Rounded corners */
    }

    /* Inline code styling */
    code {
        color: #c7254e; /* Red color for code */
    }

    /* Horizontal rule spacing */
    hr {
        margin: 40px 0; /* Space above and below dividers */
    }

    /* Interactive demo output area styling */
    .output {
        background: #e8f5e8; /* Light green background */
        padding: 10px; /* Internal spacing */
        border-radius: 5px; /* Rounded corners */
        margin: 10px 0; /* Space around the output */
        border-left: 4px solid #4CAF50; /* Green left border */
    }

    /* Demo section spacing */
    .demo-section {
        margin: 20px 0; /* Space between demo sections */
    }

    /* Button styling */
    button {
        background: #3498db; /* Blue background */
        color: white; /* White text */
        border: none; /* No border */
        padding: 8px 16px; /* Internal spacing */
        border-radius: 4px; /* Rounded corners */
        cursor: pointer; /* Hand cursor on hover */
        margin: 5px; /* Space between buttons */
    }

    /* Button hover effect */
    button:hover {
        background: #2980b9; /* Darker blue on hover */
    }

    /* Input field styling */
    input, select {
        padding: 8px; /* Internal spacing */
        border: 1px solid #ddd; /* Light gray border */
        border-radius: 4px; /* Rounded corners */
        margin: 5px; /* Space around inputs */
    }
  </style>
</head>

<body>
  <!-- Main page heading -->
  <h1>Day 7 - Modern JavaScript Examples</h1>

  <!-- ======================================== -->
  <!-- ARROW FUNCTION EXAMPLE SECTION -->
  <!-- ======================================== -->
  <div class="demo-section">
    <h2>Arrow Function Basic</h2>
    <p>Multiply two numbers:</p>
    <!-- Code example showing arrow function syntax -->
    <pre><code>&lt;script&gt;
var multiply = (a, b) =&gt; a * b;
console.log(multiply(3, 4)); // Output: 12
&lt;/script&gt;</code></pre>
    
    <!-- Interactive demo area for arrow functions -->
    <div class="output">
      <h4>Interactive Demo:</h4>
      <!-- Input fields for user to enter numbers -->
      <input type="number" id="num1" placeholder="First number" value="3">
      <input type="number" id="num2" placeholder="Second number" value="4">
      <!-- Button to trigger the multiplication -->
      <button onclick="demoMultiply()">Multiply</button>
      <!-- Area to display the result -->
      <div id="multiplyResult"></div>
    </div>
  </div>

  <hr>

  <!-- ======================================== -->
  <!-- ARRAY MAP EXAMPLE SECTION -->
  <!-- ======================================== -->
  <div class="demo-section">
    <h2>Array map Example</h2>
    <p>Double numbers in an array:</p>
    <!-- Code example showing array map method -->
    <pre><code>&lt;script&gt;
var numbers = [1, 2, 3, 4];
var doubled = numbers.map(num =&gt; num * 2);
console.log(doubled); // Output: [2, 4, 6, 8]
&lt;/script&gt;</code></pre>
    
    <!-- Interactive demo area for array map -->
    <div class="output">
      <h4>Interactive Demo:</h4>
      <!-- Button to demonstrate array mapping -->
      <button onclick="demoMap()">Double Array [1,2,3,4]</button>
      <!-- Area to display the mapping result -->
      <div id="mapResult"></div>
    </div>
  </div>

  <hr>

  <!-- ======================================== -->
  <!-- OBJECT DESTRUCTURING EXAMPLE SECTION -->
  <!-- ======================================== -->
  <div class="demo-section">
    <h2>Object Destructuring</h2>
    <p>Extract properties from an object:</p>
    <!-- Code example showing object destructuring -->
    <pre><code>&lt;script&gt;
var user = { name: 'Alice', age: 28 };
var { name, age } = user;
console.log(name, age); // Output: Alice 28
&lt;/script&gt;</code></pre>
    
    <!-- Interactive demo area for object destructuring -->
    <div class="output">
      <h4>Interactive Demo:</h4>
      <!-- Button to demonstrate object destructuring -->
      <button onclick="demoDestructuring()">Destructure User Object</button>
      <!-- Area to display the destructuring result -->
      <div id="destructuringResult"></div>
    </div>
  </div>

  <hr>

  <!-- ======================================== -->
  <!-- TEMPLATE LITERAL EXAMPLE SECTION -->
  <!-- ======================================== -->
  <div class="demo-section">
    <h2>Template Literal Example</h2>
    <p>Greet a user using template literals:</p>
    <!-- Code example showing template literal syntax -->
    <pre><code>&lt;script&gt;
var name = 'Sara';
var age = 27;
console.log(`Hello ${name}! You are ${age} years old.`);
&lt;/script&gt;</code></pre>
    
    <!-- Interactive demo area for template literals -->
    <div class="output">
      <h4>Interactive Demo:</h4>
      <!-- Input fields for user to enter name and age -->
      <input type="text" id="userName" placeholder="Enter name" value="Sara">
      <input type="number" id="userAge" placeholder="Enter age" value="27">
      <!-- Button to generate the greeting -->
      <button onclick="demoTemplateLiteral()">Generate Greeting</button>
      <!-- Area to display the generated greeting -->
      <div id="templateResult"></div>
    </div>
  </div>

  <hr>

  <!-- ======================================== -->
  <!-- FILTER AND REDUCE EXAMPLE SECTION -->
  <!-- ======================================== -->
  <div class="demo-section">
    <h2>Filter and Reduce Example</h2>
    <p>Filter affordable products and calculate total price:</p>
    <!-- Code example showing filter and reduce methods -->
    <pre><code>&lt;script&gt;
var products = [
  { name: 'Laptop', price: 900 },
  { name: 'Mouse', price: 25 },
  { name: 'Keyboard', price: 50 }
];
var affordable = products.filter(p =&gt; p.price &lt; 100);
console.log(affordable);
var total = products.reduce((sum, item) =&gt; sum + item.price, 0);
console.log(total);
&lt;/script&gt;</code></pre>
    
    <!-- Interactive demo area for filter and reduce -->
    <div class="output">
      <h4>Interactive Demo:</h4>
      <!-- Button to demonstrate filtering and reducing -->
      <button onclick="demoFilterReduce()">Show Affordable Products & Total</button>
      <!-- Area to display the filtered products and total -->
      <div id="filterReduceResult"></div>
    </div>
  </div>

  <hr>

  <!-- ======================================== -->
  <!-- SHOPPING CART CLASS EXAMPLE SECTION -->
  <!-- ======================================== -->
  <div class="demo-section">
    <h2>Shopping Cart Class</h2>
    <p>Basic ShoppingCart implementation:</p>
    <!-- Code example showing class definition and usage -->
    <pre><code>&lt;script&gt;
class ShoppingCart {
  varructor() {
    this.items = [];
  }
  addItem(item) {
    this.items.push(item);
  }
}
var cart = new ShoppingCart();
cart.addItem({ name: 'T-shirt', price: 25 });
console.log(cart.items);
&lt;/script&gt;</code></pre>
    
    <!-- Interactive demo area for shopping cart with chain select -->
    <div class="output">
      <h4>Interactive Demo:</h4>
      <!-- Chain Select (Cascading Dropdown) for Categories and Items -->
      <select name="" id="categorySelect" onchange="updateItemSelect()" style="margin-top: 10px;">
          <option value="">Select Category</option>
          <option value="clothing">Clothing</option>
          <option value="electronics">Electronics</option>
          <option value="books">Books</option>
      </select>
      
      <!-- Item dropdown that gets populated based on category selection -->
      <select name="" id="itemName" disabled onchange="updatePrice()" style="margin-top: 10px;">
          <option value="">Select Item</option>
      </select>
      <!-- Price input field that gets auto-filled when item is selected -->
      <output type="number" id="itemPrice" placeholder="Item price" style="margin-top: 10px;"></output>
      <!-- Buttons to add items and view cart -->
      <button onclick="demoShoppingCart()">Add Item to Cart</button>
      <button onclick="showCart()">Show Cart</button>
      <!-- Area to display cart operations results -->
      <div id="cartResult" style="margin-top: 10px;"></div>
      <div id="cartResult2" style="margin-top: 10px;"></div>
    </div>
  </div>

  <hr>

  <!-- ======================================== -->
  <!-- API INTEGRATION EXAMPLE SECTION -->
  <!-- ======================================== -->
  <div class="demo-section">
    <h2>API Integration with JSONPlaceholder</h2>
    <p>Fetch and display data from external API:</p>
    <!-- Code example showing API integration -->
    <pre><code>&lt;script&gt;
// Fetch posts from JSONPlaceholder API
async function fetchPosts() {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts');
  const posts = await response.json();
  return posts.slice(0, 5); // Get first 5 posts
}
&lt;/script&gt;</code></pre>
    
    <!-- Interactive demo area for API integration -->
    <div class="output">
      <h4>Interactive Demo:</h4>
      <!-- API endpoint selection -->
      <select name="" id="apiEndpoint" style="margin-top: 10px;">
        <option value="posts">Posts (100 items)</option>
        <option value="comments">Comments (500 items)</option>
        <option value="albums">Albums (100 items)</option>
        <option value="photos">Photos (5000 items)</option>
        <option value="todos">Todos (200 items)</option>
        <option value="users">Users (10 items)</option>
      </select>
      
      <!-- Number of items to fetch -->
      <input type="number" id="itemCount" placeholder="Number of items" value="5" min="1" max="100" style="margin-top: 10px;">
      
      <!-- Buttons to fetch data -->
      <button onclick="fetchApiData()" style="margin-top: 10px;">Fetch Data</button>
      <button onclick="clearApiResults()" style="margin-top: 10px;">Clear Results</button>
      
      <!-- Loading indicator -->
      <div id="loadingIndicator" style="display: none; margin-top: 10px;">
        <strong>Loading...</strong> ⏳
      </div>
      
      <!-- Area to display API results -->
      <div id="apiResult" style="margin-top: 10px;"></div>
    </div>
  </div>

  <hr>

  <!-- ======================================== -->
  <!-- JAVASCRIPT FUNCTIONS SECTION -->
  <!-- ======================================== -->
  <script>
    // ========================================
    // ARROW FUNCTION DEMO
    // ========================================
    /**
     * Demonstrates arrow function functionality
     * Takes two numbers from input fields and multiplies them
     * Displays the result in the multiplyResult div
     */
    function demoMultiply() {
        // Get values from input fields and convert to integers
        var num1 = parseInt(document.getElementById('num1').value);
        var num2 = parseInt(document.getElementById('num2').value);
        
        // Define arrow function for multiplication
        var multiply = (a, b) => a * b;
        
        // Calculate result using the arrow function
        var result = multiply(num1, num2);
        
        // Display the result with formatted output
        document.getElementById('multiplyResult').innerHTML = `<strong>Result:</strong> ${num1} × ${num2} = ${result}`;
    }

    // ========================================
    // ARRAY MAP DEMO
    // ========================================
    /**
     * Demonstrates array map method functionality
     * Takes an array of numbers and doubles each element
     * Shows both original and transformed arrays
     */
    function demoMap() {
        // Original array of numbers
        var numbers = [1, 2, 3, 4];
        
        // Use map method to double each number using arrow function
        var doubled = numbers.map(num => num * 2);
        
        // Display both original and transformed arrays
        document.getElementById('mapResult').innerHTML = `<strong>Original:</strong> [${
            numbers.join(', ')
        }]<br>
 <strong>Doubled:</strong> [${
            doubled.join(', ')
        }]`;
    }

    // ========================================
    // OBJECT DESTRUCTURING DEMO
    // ========================================
    /**
     * Demonstrates object destructuring functionality
     * Creates a user object and extracts properties using destructuring
     * Shows the original object and extracted values
     */
    function demoDestructuring() {
        // Create a user object with name and age properties
        var user = {
            name: 'Alice',
            age: 28
        };
        
        // Use object destructuring to extract properties
        var {name, age} = user;
        
        // Display the original object and destructured values
        document.getElementById('destructuringResult').innerHTML = `<strong>User object:</strong> ${
            JSON.stringify(user)
        }<br>
 <strong>Destructured:</strong> name = "${name}", age = ${age}`;
    }

    // ========================================
    // TEMPLATE LITERAL DEMO
    // ========================================
    /**
     * Demonstrates template literal functionality
     * Takes name and age from input fields and creates a greeting
     * Uses template literal syntax for string interpolation
     */
    function demoTemplateLiteral() {
        // Get values from input fields
        var name = document.getElementById('userName').value;
        var age = document.getElementById('userAge').value;
        
        // Create greeting using template literal syntax
        var greeting = `Hello ${name}! You are ${age} years old.`;
        
        // Display the generated greeting
        document.getElementById('templateResult').innerHTML = `<strong>Greeting:</strong> ${greeting}`;
    }

    // ========================================
    // FILTER AND REDUCE DEMO
    // ========================================
    /**
     * Demonstrates filter and reduce array methods
     * Filters products by price and calculates total price
     * Shows all products, affordable products, and total
     */
    function demoFilterReduce() {
        // Array of product objects with name and price
        var products = [
            {
                name: 'Laptop',
                price: 900
            }, {
                name: 'Mouse',
                price: 25
            }, {
                name: 'Keyboard',
                price: 50
            }
        ];
        
        // Use filter method to get products under $100
        var affordable = products.filter(p => p.price < 100);
        
        // Use reduce method to calculate total price of all products
        var total = products.reduce((sum, item) => sum + item.price, 0);

        // Display all information in formatted output
        document.getElementById('filterReduceResult').innerHTML = `<strong>All products:</strong> ${
            JSON.stringify(products)
        }<br>
 <strong>Affordable products (price < 100):</strong> ${
            JSON.stringify(affordable)
        }<br>
 <strong>Total price:</strong> $${total}`;
    }

    // ========================================
    // SHOPPING CART CLASS DEFINITION
    // ========================================
    /**
     * ShoppingCart class for managing cart items
     * Provides methods to add items and retrieve cart contents
     */
    class ShoppingCart {
        /**
         * Constructor initializes empty items array
         */
        constructor() {
            this.items = []; // Array to store cart items
        }
        
        /**
         * Adds an item to the shopping cart
         * @param {Object} item - Item object with name and price
         */
        addItem(item) {
            this.items.push(item); // Add item to the items array
        }
        
        /**
         * Returns all items in the shopping cart
         * @returns {Array} Array of cart items
         */
        getItems() {
            return this.items; // Return the items array
        }
    }
    
    // Create a new shopping cart instance
    let cart = new ShoppingCart();

    // ========================================
    // CHAIN SELECT (CASCADING DROPDOWN) SYSTEM
    // ========================================
    
    /**
     * Product database with categories and items
     * This object stores all available products organized by category
     * Each category contains an array of product objects with name and price
     */
    var productDatabase = {
        clothing: [
            { name: 'T-shirt', price: 25 },
            { name: 'Jeans', price: 50 },
            { name: 'Shoes', price: 80 },
            { name: 'Jacket', price: 120 }
        ],
        electronics: [
            { name: 'Laptop', price: 900 },
            { name: 'Mouse', price: 25 },
            { name: 'Keyboard', price: 50 },
            { name: 'Headphones', price: 75 }
        ],
        books: [
            { name: 'JavaScript Guide', price: 30 },
            { name: 'Web Development', price: 45 },
            { name: 'Programming Basics', price: 20 },
            { name: 'Design Patterns', price: 35 }
        ]
    };

    /**
     * Updates the item dropdown based on the selected category
     * This function is called when the category dropdown changes
     * It populates the item dropdown with relevant items from the selected category
     */
    function updateItemSelect() {
        // Get the selected category from the first dropdown
        var selectedCategory = document.getElementById('categorySelect').value;
        var itemSelect = document.getElementById('itemName');
        var itemPrice = document.getElementById('itemPrice');
        
        // Clear existing options in the item dropdown
        itemSelect.innerHTML = '<option value="">Select Item</option>';
        itemPrice.value = '';
        
        // If a category is selected, populate the item dropdown
        if (selectedCategory && productDatabase[selectedCategory]) {
            // Enable the item dropdown
            itemSelect.disabled = false;
            
            // Add options for each item in the selected category
            productDatabase[selectedCategory].forEach(function(item) {
                var option = document.createElement('option');
                option.value = item.name;
                option.textContent = item.name + ' - $' + item.price;
                itemSelect.appendChild(option);
            });
        } else {
            // Disable the item dropdown if no category is selected
            itemSelect.disabled = true;
        }
    }

    /**
     * Updates the price input field when an item is selected
     * This function is called when the item dropdown changes
     * It automatically fills in the price based on the selected item
     */
    function updatePrice() {
        // Get selected category and item
        var selectedCategory = document.getElementById('categorySelect').value;
        var selectedItem = document.getElementById('itemName').value;
        var priceInput = document.getElementById('itemPrice');
        
        // Find the selected item in the product database
        if (selectedCategory && selectedItem && productDatabase[selectedCategory]) {
            var item = productDatabase[selectedCategory].find(function(product) {
                return product.name === selectedItem;
            });
            
            // Update the price input with the item's price
            if (item) {
                priceInput.value = item.price;
            }
        }
    }

    /**
     * Adds the selected item to the shopping cart
     * Gets item name and price from the form fields
     * Displays confirmation message when item is added
     */
    function demoShoppingCart() {
        // Get item name and price from form fields
        var name = document.getElementById('itemName').value;
        var price = parseInt(document.getElementById('itemPrice').value);

        // Only add item if both name and price are provided
        if (name && price) {
            cart.addItem({name, price}); // Add item to cart
            document.getElementById('cartResult').innerHTML += `<strong>Added:</strong> ${name} - $${price}<br>`;
            document.getElementById('cartResult2').innerHTML = ` `;
        }
        document.getElementById('itemPrice').value = '';
        document.getElementById('itemName').value = '';
        document.getElementById('categorySelect').value = '';

        updateItemSelect();
    }

    /**
     * Displays all items in the shopping cart
     * Shows item list and calculates total price
     * Displays "Cart is empty" message if no items exist
     */
    function showCart() {
        var items = cart.getItems(); // Get all cart items
        
        if (items.length === 0) {
            // Display empty cart message
            document.getElementById('cartResult').innerHTML = `<strong>Cart is empty</strong>`;
        } else {
            // Create formatted list of items
            var itemsList = items.map(item => `${
                item.name
            } - $${
                item.price
            }`).join('<br>');
            
            // Calculate total price using reduce method
            var total = items.reduce((sum, item) => sum + item.price, 0);
            
            // Display items list and total
            document.getElementById('cartResult2').innerHTML = `<strong>Cart Items:</strong><br>${itemsList}<br><strong>Total: $${total}</strong>`;
            document.getElementById('cartResult').innerHTML = ` `;
        }
    }

    // ========================================
    // API INTEGRATION DEMO
    // ========================================
    /**
     * Fetches data from a specified JSONPlaceholder API endpoint
     * Displays the data in the apiResult div
     */
    async function fetchApiData() {
        var endpoint = document.getElementById('apiEndpoint').value;
        var itemCount = parseInt(document.getElementById('itemCount').value);
        var apiResultDiv = document.getElementById('apiResult');
        var loadingIndicator = document.getElementById('loadingIndicator');

        // Clear previous results and show loading
        apiResultDiv.innerHTML = '';
        loadingIndicator.style.display = 'block';

        try {
            var url = `https://jsonplaceholder.typicode.com/${endpoint}${Number(itemCount) > 0 ? ( Number(itemCount) > 100 ? '?_limit=100' : '?_limit=' + itemCount) : ''}`;
            console.log(url);
            
            const response = await fetch(url);
            const data = await response.json();

            if (data.length === 0) {
                apiResultDiv.innerHTML = `<strong>No data found for this endpoint with the specified count.</strong>`;
            } else {
                var output = `<strong>Data from ${endpoint} (Showing ${data.length} of ${itemCount}):</strong><br>`;
                data.forEach(item => {
                    output += JSON.stringify(item) + '<br>';
                });
                apiResultDiv.innerHTML = output;
            }
        } catch (error) {
            apiResultDiv.innerHTML = `<strong>Error fetching data:</strong> ${error.message}`;
        } finally {
            loadingIndicator.style.display = 'none';
        }
    }

    /**
     * Clears the results displayed in the apiResult div
     */
    function clearApiResults() {
        document.getElementById('apiResult').innerHTML = '';
    }
  </script>

  <script type="module" src="app.js"></script>

  <!-- index.html module script tag -->
  <script type="module">
    import { square } from './utils.js';
    console.log(square(4)); // 16
  </script>
  

  <script src="main.js"></script>

  <script src="arrays.js"></script>

  <script src="arr_task.js"></script>

  <script src="apis.js"></script>
</body>
</html>
